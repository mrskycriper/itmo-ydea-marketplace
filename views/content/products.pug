extends ../template

block additionalScripts
    script(src='/js/products.js')

block content
        div(class="catalogue-container")
            div(class="products-card")
            div(class='product-card__text')
              p() Сортировка по цене
              a(class="product__button" href="#" onclick='handlePriceSortUp();') По возрастанию
              a(class="product__button" href="#" onclick='handlePriceSortDown();') По убыванию
              p() Сортировка по рейтингу
              a(class="product__button"  href="#" onclick='handleRatingSortUp();') По возрастанию
              a(class="product__button" href="#" onclick='handleRatingSortDown();') По убыванию

            div(class="dropdown")
              button(class="dropbtn") Продавцы
              div(class="dropdown-content")
                each seller in sellers
                   a(href="#" onclick='handleSortSeller('+seller.id+');')= seller.user.name 
            
            div(class="dropdown")
              button(class="dropbtn") Категории товаров
              div(class="dropdown-content")
                each category in categories
                   a(href="#" onclick='handleSortCategory(\''+category.id+'\');')= category.category 
            a(class="product__button" href="#" onclick='handleNoFilters();') Сбросить все фильтры
            a(class="product__button" href="#" onclick='handlePreviousPage();') Предыдущая страница
            a(class="product__button" href="#" onclick='handleNextPage();') Следующая страница
            div(class="dropdown")
              button(class="dropbtn") Товаров на странице
              div(class="dropdown-content")
                  a(href="#" onclick='handlePerPage('+1+');') 1
                  a(href="#" onclick='handlePerPage('+5+');') 5
                  a(href="#" onclick='handlePerPage('+10+');') 10
                  a(href="#" onclick='handlePerPage('+25+');') 25
            
            if (!empty)
              each product in products
                  div(class="products-card")
                      //if product.photos[0]
                      //    img(src=product.photos[0].photo_url class="product-card__photo")
                      //else
                      //    img(src="https://media.istockphoto.com/id/1147544807/vector/thumbnail-image-vector-graphic.jpg?s=612x612&w=0&k=20&c=rnCKVbdxqkjlcs3xH87-9gocETqpspHFXu5dIGB4wuM=" class="product-card__photo")
                      ////img(src=product.photo class="product-card__photo")
                      div(class='product-card__text')
                          div(class="product-card__header")
                              a(class="product-card__name" href='/products/' + product.id)= product.name
                          p(class='product-card__description')= product.description
                          p(class='product-card__description')= "Цена "+product.price
                          p(class='product-card__description')= "Рейтинг "+product.rating_average
                          if(product.number > 0 && product.number > product.number_booked)
                           a(class="product__button" href="#" onclick='javascript:handleCreateProductsInOrder('+product.id+', \''+userid+'\');') Добавить в корзину
                           div(class='product__input-group')
                               label(class='product__input-label' for='number') Количество
                               input(class='product__input' id='number '+product.id required=true value="1")
                          else
                           p(class='product-card__description') Нет в наличии
            else
                p(class='empty-list') Каталог пуст
            a(class="product__button" href="#" onclick='handlePreviousPage();') Предыдущая страница
            a(class="product__button" href="#" onclick='handleNextPage();') Следующая страница